config_opts['chroot_setup_cmd'] = "install bash bzip2 coreutils cpio diffutils findutils gawk glibc-minimal-langpack grep gzip info patch redhat-release redhat-rpm-config rpm-build sed shadow-utils tar unzip util-linux which xz"
config_opts['package_manager'] = "dnf"
config_opts['releasever'] = "9"

# Don't use container based bootstrap chroot
config_opts['use_bootstrap_image'] = False

config_opts['cleanup_on_failure'] = False
config_opts['cleanup_on_success'] = False

# We add in FILE_OFFSET_BITS for 32 bit to be able to handle larger inodes
config_opts['macros']['_preprocessor_defines'] = '-Wp,-D_FORTIFY_SOURCE=2 -Wp,-D_GLIBCXX_ASSERTIONS -Wp,-D_FILE_OFFSET_BITS=64'

# Reproducible builds - BEGIN

# Make sure static libraries are deterministic
config_opts['macros']['__brp_strip_static_archive'] = '/usr/lib/rpm/brp-strip-static-archive "%{__strip} -D"'

# If true, set the SOURCE_DATE_EPOCH environment variable
# to the timestamp of the topmost changelog entry
config_opts['macros']['source_date_epoch_from_changelog'] = '1'

# If true, make sure that buildtime in built rpms
# is set to the value of SOURCE_DATE_EPOCH.
# Is ignored when SOURCE_DATE_EPOCH is not set.
config_opts['macros']['use_source_date_epoch_as_buildtime'] = '1'

# If true, make sure that timestamps in built rpms
# are not later than the value of SOURCE_DATE_EPOCH.
# Is ignored when SOURCE_DATE_EPOCH is not set.
config_opts['macros']['clamp_mtime_to_source_date_epoch'] = '1'

# Freeze BUILDHOST in rpm metadata
config_opts['macros']['_buildhost'] = 'eext-buildhost'

# Reproducible builds - END

# Autogenerated common configuration
config_opts['resultdir'] = "{{.TestWorkingDir}}/work/pkg1/mock-x86_64/mock-results"
config_opts['root'] = "pkg1-x86_64"
config_opts['target_arch'] = "x86_64"

# Autogenerated macros
config_opts['macros']['distribution'] = 'eextsig=my-signature'
config_opts['macros']['eext_release'] = 'my-release'

# Autogenerated dnf.conf
config_opts['dnf.conf'] = """
[main]
assumeyes=1
best=1
debuglevel=2
install_weak_deps=0
keepcache=1
logfile=/var/log/yum.log
mdpolicy=group:primary
metadata_expire=0
module_platform_id=platform:el9
obsoletes=1
protected_packages=
reposdir=/dev/null
retries=20
syslog_device=
syslog_ident=mock


[repo-roo11]
name = repo-roo11
baseurl = https://foo.org/boo1-v1/repo-roo11/x86_64/
enabled = 1
gpgcheck = 1
gpgkey = file:///keyfile
exclude = roo1-rpm.rpm
priority = 2

[repo-roo12]
name = repo-roo12
baseurl = https://foo.org/boo1-v1/repo-roo12/x86_64/
enabled = 0
gpgcheck = 1
gpgkey = file:///keyfile
priority = 2

[repo-roo13]
name = repo-roo13
baseurl = https://foo.org/boo1-v1/repo-roo13/x86_64/
enabled = 0
gpgcheck = 1
gpgkey = file:///keyfile
priority = 2

[repo-roo14]
name = repo-roo14
baseurl = https://foo.org/boo1-v1/repo-roo14/x86_64/
enabled = 1
gpgcheck = 1
gpgkey = file:///keyfile
priority = 2

[repo-roo21]
name = repo-roo21
baseurl = https://foo.org/boo2-v2/repo-roo21/x86_64/
enabled = 1
gpgcheck = 0
priority = 2

[repo-roo21]
name = repo-roo21
baseurl = https://foo.org/boo2-v3/repo-roo21/x86_64/
enabled = 1
gpgcheck = 0
priority = 2

{{- if .Chained}}

[local-deps]
name = local-deps
baseurl = file://{{.TestWorkingDir}}/work/pkg1/mock-x86_64/mock-deps
enabled = 1
gpgcheck = 0
priority = 1
{{- end }}
"""
